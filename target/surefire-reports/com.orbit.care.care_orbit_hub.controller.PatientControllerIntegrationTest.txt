-------------------------------------------------------------------------------
Test set: com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest
-------------------------------------------------------------------------------
Tests run: 13, Failures: 1, Errors: 3, Skipped: 0, Time elapsed: 0.825 s <<< FAILURE! -- in com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest
com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.listAllPatients -- Time elapsed: 0.020 s <<< ERROR!
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.orbit.care.care_orbit_hub.entity.PatientEntity.appointmentSet: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:150)
	at org.hibernate.collection.spi.PersistentSet.size(PersistentSet.java:148)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.medicalAppointmentEntitySetToAppointmentDTOSet(PatientsMapperImpl.java:178)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.mapPatientEntityToPatientDTO(PatientsMapperImpl.java:69)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:212)
	at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1086)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:702)
	at org.springframework.data.domain.Chunk.getConvertedContent(Chunk.java:121)
	at org.springframework.data.domain.PageImpl.map(PageImpl.java:86)
	at com.orbit.care.care_orbit_hub.service.PatientServiceJpaImpl.listPatients(PatientServiceJpaImpl.java:50)
	at com.orbit.care.care_orbit_hub.controller.PatientController.listAllPatients(PatientController.java:43)
	at com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.listAllPatients(PatientControllerIntegrationTest.java:61)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.getPatientById -- Time elapsed: 0.019 s <<< ERROR!
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.orbit.care.care_orbit_hub.entity.PatientEntity.appointmentSet: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentSet.toString(PersistentSet.java:297)
	at java.base/java.lang.String.valueOf(String.java:4507)
	at com.orbit.care.care_orbit_hub.entity.PatientEntity.toString(PatientEntity.java:21)
	at java.base/java.lang.String.valueOf(String.java:4507)
	at java.base/java.lang.StringBuilder.append(StringBuilder.java:173)
	at java.base/java.util.Optional.toString(Optional.java:457)
	at com.orbit.care.care_orbit_hub.service.PatientServiceJpaImpl.getPatient(PatientServiceJpaImpl.java:34)
	at com.orbit.care.care_orbit_hub.controller.PatientController.getPatientById(PatientController.java:49)
	at com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.getPatientById(PatientControllerIntegrationTest.java:114)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.updatePatientForUnknownId -- Time elapsed: 0.025 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Unexpected exception type thrown, expected: <com.orbit.care.care_orbit_hub.exception.NotFoundException> but was: <org.hibernate.LazyInitializationException>
	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:67)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3115)
	at com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.updatePatientForUnknownId(PatientControllerIntegrationTest.java:163)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
Caused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.orbit.care.care_orbit_hub.entity.PatientEntity.appointmentSet: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:150)
	at org.hibernate.collection.spi.PersistentSet.size(PersistentSet.java:148)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.medicalAppointmentEntitySetToAppointmentDTOSet(PatientsMapperImpl.java:178)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.mapPatientEntityToPatientDTO(PatientsMapperImpl.java:69)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:212)
	at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1086)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:702)
	at org.springframework.data.domain.Chunk.getConvertedContent(Chunk.java:121)
	at org.springframework.data.domain.PageImpl.map(PageImpl.java:86)
	at com.orbit.care.care_orbit_hub.service.PatientServiceJpaImpl.listPatients(PatientServiceJpaImpl.java:50)
	at com.orbit.care.care_orbit_hub.controller.PatientController.listAllPatients(PatientController.java:43)
	at com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.lambda$updatePatientForUnknownId$1(PatientControllerIntegrationTest.java:164)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	... 6 more

com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.updatePatient -- Time elapsed: 0.008 s <<< ERROR!
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.orbit.care.care_orbit_hub.entity.PatientEntity.appointmentSet: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:150)
	at org.hibernate.collection.spi.PersistentSet.size(PersistentSet.java:148)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.medicalAppointmentEntitySetToAppointmentDTOSet(PatientsMapperImpl.java:178)
	at com.orbit.care.care_orbit_hub.mapper.PatientsMapperImpl.mapPatientEntityToPatientDTO(PatientsMapperImpl.java:69)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:212)
	at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1086)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:556)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:546)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:702)
	at org.springframework.data.domain.Chunk.getConvertedContent(Chunk.java:121)
	at org.springframework.data.domain.PageImpl.map(PageImpl.java:86)
	at com.orbit.care.care_orbit_hub.service.PatientServiceJpaImpl.listPatients(PatientServiceJpaImpl.java:50)
	at com.orbit.care.care_orbit_hub.controller.PatientController.listAllPatients(PatientController.java:43)
	at com.orbit.care.care_orbit_hub.controller.PatientControllerIntegrationTest.updatePatient(PatientControllerIntegrationTest.java:152)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

